<!-- 
  IMPROVED CHATBOT EMBED CODE - Matches Original Styling
  Copy everything between the START and END comments
  Paste into your website's custom HTML/code section
-->

<!-- START CHATBOT EMBED CODE -->
<div id="chatbot-widget-container"></div>
<script>
(function() {
  'use strict';
  
  // Configuration
  const CHATBOT_URL = 'https://xyz-chatbot.vercel.app';
  
  // Widget class
  class ChatbotWidget {
    constructor(options = {}) {
      this.options = {
        position: options.position || 'bottom-right',
        width: options.width || '400px',
        height: options.height || '600px',
        buttonColor: options.buttonColor || 'linear-gradient(135deg, #ff8c42 0%, #ff6b1a 100%)',
        ...options
      };
      
      this.isOpen = false;
      this.init();
    }
    
    init() {
      this.createStyles();
      this.createButton();
      this.createIframe();
    }
    
    createStyles() {
      const styles = `
        .chatbot-widget-button {
          position: fixed;
          ${this.getPositionStyles()}
          width: 60px;
          height: 60px;
          border-radius: 50%;
          background: ${this.options.buttonColor};
          color: white;
          border: none;
          font-size: 24px;
          cursor: pointer;
          box-shadow: 0 8px 25px rgba(255, 140, 66, 0.4);
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          z-index: 10000;
          display: flex;
          align-items: center;
          justify-content: center;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        
        .chatbot-widget-button:hover {
          transform: translateY(-2px) scale(1.05);
          box-shadow: 0 12px 35px rgba(255, 140, 66, 0.6);
        }
        
        .chatbot-widget-button.open {
          background: #2a2a2a;
          box-shadow: 0 8px 25px rgba(42, 42, 42, 0.4);
        }
        
        .chatbot-widget-button.open:hover {
          box-shadow: 0 12px 35px rgba(42, 42, 42, 0.6);
        }
        
        .chatbot-widget-iframe {
          position: fixed;
          ${this.getPositionStyles()}
          width: ${this.options.width};
          height: ${this.options.height};
          background: #1a1a1a;
          border-radius: 20px;
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
          border: 1px solid #333;
          z-index: 9999;
          transform: translateY(100%) scale(0.8);
          opacity: 0;
          visibility: hidden;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          pointer-events: none;
        }
        
        .chatbot-widget-iframe.open {
          transform: translateY(0) scale(1);
          opacity: 1;
          visibility: visible;
          pointer-events: auto;
        }
        
        @media (max-width: 768px) {
          .chatbot-widget-iframe {
            width: 100vw !important;
            height: 100vh !important;
            top: 0 !important;
            left: 0 !important;
            right: auto !important;
            bottom: auto !important;
            border-radius: 0 !important;
            transform: translateX(100%) !important;
          }
          
          .chatbot-widget-iframe.open {
            transform: translateX(0) !important;
          }
          
          .chatbot-widget-button {
            bottom: 30px !important;
            right: 30px !important;
          }
        }
      `;
      
      const styleSheet = document.createElement('style');
      styleSheet.textContent = styles;
      document.head.appendChild(styleSheet);
    }
    
    getPositionStyles() {
      const positions = {
        'bottom-right': 'bottom: 100px; right: 30px;',
        'bottom-left': 'bottom: 100px; left: 30px;',
        'top-right': 'top: 30px; right: 30px;',
        'top-left': 'top: 30px; left: 30px;'
      };
      return positions[this.options.position] || positions['bottom-right'];
    }
    
    getButtonPositionStyles() {
      const positions = {
        'bottom-right': 'bottom: 30px; right: 30px;',
        'bottom-left': 'bottom: 30px; left: 30px;',
        'top-right': 'top: 30px; right: 30px;',
        'top-left': 'top: 30px; left: 30px;'
      };
      return positions[this.options.position] || positions['bottom-right'];
    }
    
    createButton() {
      this.button = document.createElement('button');
      this.button.className = 'chatbot-widget-button';
      this.button.innerHTML = 'ðŸ’¬';
      this.button.setAttribute('aria-label', 'Open chat');
      this.button.style.cssText = this.getButtonPositionStyles();
      
      this.button.addEventListener('click', () => this.toggle());
      
      document.body.appendChild(this.button);
    }
    
    createIframe() {
      this.iframe = document.createElement('iframe');
      this.iframe.className = 'chatbot-widget-iframe';
      this.iframe.src = `${CHATBOT_URL}/embed.html`;
      this.iframe.setAttribute('title', 'Portfolio Chatbot');
      
      document.body.appendChild(this.iframe);
    }
    
    toggle() {
      this.isOpen = !this.isOpen;
      
      if (this.isOpen) {
        this.open();
      } else {
        this.close();
      }
    }
    
    open() {
      this.iframe.classList.add('open');
      this.button.classList.add('open');
      this.button.innerHTML = 'âœ•';
      this.button.setAttribute('aria-label', 'Close chat');
    }
    
    close() {
      this.iframe.classList.remove('open');
      this.button.classList.remove('open');
      this.button.innerHTML = 'ðŸ’¬';
      this.button.setAttribute('aria-label', 'Open chat');
    }
  }
  
  // Initialize the widget when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
      new ChatbotWidget();
    });
  } else {
    new ChatbotWidget();
  }
})();
</script>
<!-- END CHATBOT EMBED CODE -->
